generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:../db_data/data.db"
}

// ==================== APP SETTING DB =========================================
model ApiLogs {
    id        String    @id @unique @default(uuid())
    createdAt DateTime? @default(now())
    userId    String?
    method    String?
    url       String?
    ipAddress String?
    status    String?
    input     String?
    output    String?
}

// ==================== USER MANAGEMENT =========================================
model WhatsappUser {
    id        String   @id @unique @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    whatsappPhone String?
    whatsappId    String?
    firstName     String?
    lastName      String?
    name          String?
    phone         String?
    email         String?
    password      String?
    token         String?

    code String?

    userType String? @default("USER")
    role     String?
    status   String? @default("ACTIVE")
}

model User {
    id        String   @id @unique @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    password  String?
    firstName String?
    lastName  String?
    role      String?

    phone              String? @unique
    countryCode        String?
    phoneOtp           String?
    PhoneOtpExpiryTime String?
    isPhoneVerified    String? @default("false")

    email              String? @unique
    emailOtp           String?
    emailOtpExpiryTime String?
    isEmailVerified    String? @default("false")

    status   String? @default("ACTIVE")
    userType String? @default("USER")

    deviceToken String?
}

model adminSession {
    id        String   @id @unique @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    apiKey    String?
    apiSecret String?
    token     String?
}

model UserSession {
    id            String   @id @unique @default(uuid())
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    whatsappPhone String
    step          String?
    userFlow      String?
    language      String?
    data          String? // JSON data
}

model CrmApiLogs {
    id            String   @id @unique @default(uuid())
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt
    whatsappPhone String?
    name          String?
    phone         String?
    email         String?
    url           String?
    method        String?
    type          String?
    requestData   String?
    responseData  String?
    status        String?
    statusCode    Int?
    errorMessage  String?
    responseTime  Int?
}
